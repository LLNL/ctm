{
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "required": [
        "solution"
    ],
    "properties": {
        "solution": {
            "type": "object",
            "required": [
                "bus",
                "shunt",
                "gen",
                "storage",
                "switch",
                "ac_line",
                "transformer",
                "hvdc_p2p"
            ],
            "properties": {
                "bus": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "vm",
                            "va"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "vm": {
                                "anyOf": [
                                    { "$ref": "#/$defs/positive_number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "va": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "shunt": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "num_steps"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "num_steps": {
                                "anyOf": [
                                    { "$ref": "#/$defs/nonnegative_integer" },
                                    { "type": "array", "items": { "$ref": "#/$defs/nonnegative_integer" } },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "gen": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "pg",
                            "qg"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "pg": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qg": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "in_service": {
                                "anyOf": [
                                    { "$ref": "#/$defs/binary" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "storage": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "ps",
                            "qs",
                            "energy"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "ps": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qs": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "energy": {
                                "anyOf": [
                                    { "$ref": "#/$defs/nonnegative_number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "charge": {
                                "anyOf": [
                                    { "$ref": "#/$defs/nonnegative_number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "discharge": {
                                "anyOf": [
                                    { "$ref": "#/$defs/nonnegative_number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "switch": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "psw_fr",
                            "qsw_fr",
                            "state"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "psw_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qsw_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "state": {
                                "anyOf": [
                                    { "$ref": "#/$defs/binary" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "ac_line": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "pl_fr",
                            "ql_fr",
                            "pl_to",
                            "ql_to"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "pl_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "ql_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "pl_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "ql_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "transformer": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "pt_fr",
                            "qt_fr",
                            "pt_to",
                            "qt_to"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "tm": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "ta": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "pt_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qt_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "pt_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qt_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                },
                "hvdc_p2p": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "uid",
                            "vm_dc",
                            "pdc_fr",
                            "qdc_fr",
                            "pdc_to",
                            "qdc_to"
                        ],
                        "properties": {
                            "uid": {
                                "$ref": "#/$defs/uid"
                            },
                            "vm_dc": {
                                "anyOf": [
                                    { "$ref": "#/$defs/positive_number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "pdc_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qdc_fr": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "pdc_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            },
                            "qdc_to": {
                                "anyOf": [
                                    { "type": "number" },
                                    { "$ref": "#/$defs/time_series_reference" }
                                ]
                            }
                        }
                    }
                }
            }
        },
        "time_series_data": {
            "type": "object",
            "required": [
                "uid"
            ],
            "properties": {
                "uid": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/uid"
                    }
                },
                "name": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "source_uid": {
                    "type": "array"
                },
                "path_to_file": {
                    "anyOf": [
                        { "type": "string"},
                        { "type": "array", "items": { "type": "string" } }
                    ]
                },
                "timestamp": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/nonnegative_integer"
                    }
                },
                "values": {
                    "type": "array",
                    "items": {
                        "type": "array"
                    }
                }
            }
        }
    },
    "$defs": {
        "binary": {
            "type": "integer",
            "minimum": 0,
            "maximum": 1
        },
        "nonnegative_integer": {
            "type": "integer",
            "minimum" : 0
        },
        "nonnegative_number": {
            "type": "number",
            "minimum" : 0
        },
        "positive_integer": {
            "type": "integer",
            "exclusiveMinimum" : 0
        },
        "positive_number": {
            "type": "number",
            "exclusiveMinimum" : 0
        },
        "uid": {
            "anyOf": [
                { "type": "integer", "minimum": 0 },
                { "type": "string" }
            ]
        },
        "time_series_reference" : {
            "type": "object",
            "required": [
                "uid",
                "scale_factor"
            ],
            "properties": {
                "uid": {
                    "anyOf" : [
                        { "type": "integer", "minimum": 0 },
                        { "type": "string" }
                    ]
                },
                "scale_factor": {
                    "type": "number"
                }
            }
        }
    }
}
